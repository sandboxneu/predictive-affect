<!DOCTYPE html>
<html>
  <head>
    <title>Encoding Phase</title>
    <meta charset="UTF-8">
    <link href="node_modules/jspsych/css/jspsych.css" rel="stylesheet" type="text/css"></link>
    <script src="node_modules/jspsych/jspsych.js"></script>
    <script src="node_modules/jspsych/plugins/jspsych-instructions.js"></script>
    <script src="node_modules/jspsych/plugins/jspsych-html-keyboard-response.js" type="text/javascript"></script>
  </head>
  <body></body>
  <script>
const timeline = [];
const preKeyPractice = {
  type: 'html-keyboard-response',
  choices: ['j', 'k'],
  stimulus: 'Welcome! Choose j or k to proceed forward.',
};

timeline.push(preKeyPractice);

const KPressed = {
  type: 'html-keyboard-reponse',
  stimulus: 'Great! Now, press the other button (j).',
  choices: ['j'],
  conditional_function: () => {
    // get the data from the previous trial,
    // and check which key was pressed
    var data = jsPsych.data.get().last(1).values()[0];
    if (data.key_press == jsPsych.pluginAPI.convertKeyCharacterToKeyCode('j')) {
      return true;
    } else {
      return false;
    }
  },
};

const JPressed = {
  type: 'html-keyboard-reponse',
  stimulus: 'Great! Now, press the other button (k).',
  choices: ['k'],
  conditional_function: () => {
    // get the data from the previous trial,
    // and check which key was pressed
    var data = jsPsych.data.get().last(1).values()[0];
    if (data.key_press == jsPsych.pluginAPI.convertKeyCharacterToKeyCode('j')) {
      return true;
    } else {
      return false;
    }
  },
};

timeline.push(KPressed);
timeline.push(JPressed);

const test = {
  type: 'instructions',
  pages: 'hello world',
};
console.log('about to push')
timeline.push(test);
console.log('pushed')
jsPsych.init({
  timeline: timeline,
});

  </script>
</html>
